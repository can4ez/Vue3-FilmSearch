(function(){"use strict";var t={5754:function(t,e,i){var a=i(9242),n=i(3396);const o={class:"wrapper"};function s(t,e,i,a,s,r){const l=(0,n.up)("NavBar"),c=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n.Wm)(l),(0,n.Wm)(c,{class:"hero is-fullheight"}),(0,n.Wm)(l)])}const r={class:"navbar p-0",role:"navigation","aria-label":"main navigation"},l={class:"navbar-brand"},c=(0,n._)("a",{class:"navbar-item",href:"https://bulma.io"},[(0,n._)("img",{src:"https://bulma.io/images/bulma-logo.png",width:"112",height:"28"})],-1),u=(0,n._)("span",{"aria-hidden":"true"},null,-1),m=(0,n._)("span",{"aria-hidden":"true"},null,-1),d=(0,n._)("span",{"aria-hidden":"true"},null,-1),f=[u,m,d],v={id:"navbarBlock",class:"navbar-menu"},h={class:"navbar-start"},p=(0,n.Uk)(" Главная "),g=(0,n.Uk)(" ТОП-250 "),_=(0,n.Uk)(" Избранное "),w=(0,n.Uk)(" Поиск "),y={class:"navbar-end"},k={class:"navbar-item"},D={class:"field has-addons"},b={class:"control is-expanded"},F={class:"control"};function I(t,e,i,o,s,u){const m=(0,n.up)("router-link"),d=(0,n.up)("font-awesome-icon");return(0,n.wg)(),(0,n.iD)("nav",r,[(0,n._)("div",l,[c,(0,n._)("a",{role:"button",class:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBlock",onClick:e[0]||(e[0]=(...t)=>u.toggleActive&&u.toggleActive(...t))},f)]),(0,n._)("div",v,[(0,n._)("div",h,[(0,n.Wm)(m,{to:{name:"home"},class:"navbar-item"},{default:(0,n.w5)((()=>[p])),_:1}),(0,n.Wm)(m,{to:{name:"top"},class:"navbar-item"},{default:(0,n.w5)((()=>[g])),_:1}),(0,n.Wm)(m,{to:{name:"favorites"},class:"navbar-item"},{default:(0,n.w5)((()=>[_])),_:1}),(0,n.Wm)(m,{to:{name:"search"},class:"navbar-item"},{default:(0,n.w5)((()=>[w])),_:1})]),(0,n._)("div",y,[(0,n._)("div",k,[(0,n._)("div",D,[(0,n._)("p",b,[(0,n.wy)((0,n._)("input",{class:"input",type:"search",placeholder:"Найти фильмец...","onUpdate:modelValue":e[1]||(e[1]=t=>s.searchTxt=t)},null,512),[[a.nr,s.searchTxt]])]),(0,n._)("div",F,[(0,n._)("button",{class:"button is-primary",onClick:e[2]||(e[2]=(...t)=>u.doSearch&&u.doSearch(...t))},[(0,n.Wm)(d,{icon:"fas fa-search"})])])])])])])])}var E={name:"NavBar",data(){return{searchTxt:null}},components:{},computed:{},methods:{toggleActive:function(t){const e=t.target.dataset.target,i=document.getElementById(e);t.target.classList.toggle("is-active"),i.classList.toggle("is-active")},doSearch:function(t){"search"===this.$router.currentRoute.value.name?this.$router.replace({name:"search",query:{q:this.searchTxt}}):this.$router.push({name:"search",query:{q:this.searchTxt}})}},mounted(){}},A=i(89);const R=(0,A.Z)(E,[["render",I]]);var O=R,C={components:{NavBar:O},strict:!0};const q=(0,A.Z)(C,[["render",s]]);var S=q,M=i(2483),V=i(7139);const $=t=>((0,n.dD)("data-v-58e75c94"),t=t(),(0,n.Cn)(),t),B={id:"homeView"},T={key:0,class:"container is-fluid p-0"},U={class:"title"},L=$((()=>(0,n._)("div",{class:"container is-fluid p-0 text-block"},[(0,n._)("section",{class:"hero is-info is-fullheight"},[(0,n._)("div",{class:"hero-body"},[(0,n._)("p",{class:""},[(0,n.Uk)(" Предназначение сервиса — помочь пользователю выбрать фильм для просмотра."),(0,n._)("br"),(0,n.Uk)(" Сервис поможет легко и быстро найти российские или зарубежные фильмы для взрослых и детей в интересующих жанрах. ")])])])],-1)));function x(t,e,i,a,o,s){return(0,n.wg)(),(0,n.iD)("div",B,[null!==o.film?((0,n.wg)(),(0,n.iD)("div",T,[(0,n._)("section",{class:"hero is-fullheight",style:(0,V.j5)({"background-image":`url(${o.film["posterUrl"]})`})},[(0,n._)("a",{class:"hero-body",onClick:e[0]||(e[0]=(...t)=>s.handleClickBanner&&s.handleClickBanner(...t))},[(0,n._)("p",U,(0,V.zw)(o.film["nameRu"]),1)])],4)])):(0,n.kq)("",!0),L])}var z=i(6265),N=i.n(z);const W="6d4b871f-4668-46f6-873a-c61ffd2afb09";var j={name:"HomeView",data(){return{film:null}},components:{},computed:{},methods:{async loadRandomFilm(){if(null===this.film)try{const t="v2.2/films/top",e=`https://kinopoiskapiunofficial.tech/api/${t}`,i={headers:{"X-API-KEY":W},params:{type:"",page:"1"}},a=await N().get(e,i);this.film=a.data.films[a.data.films.length*Math.random()|0]}catch(t){t.response?console.log("Server Error:",t):t.request?console.log("Network Error:",t):console.log("Client Error:",t)}},handleClickBanner(){this.$router.push({name:"movie",query:{id:this.film.filmId}})}},mounted(){this.loadRandomFilm()}};const P=(0,A.Z)(j,[["render",x],["__scopeId","data-v-58e75c94"]]);var Z=P;const K={id:"searchView"},Y={class:"container p-3"},J={key:0},X={key:1},H={key:2};function G(t,e,i,a,o,s){const r=(0,n.up)("MoviesList");return(0,n.wg)(),(0,n.iD)("div",K,[(0,n._)("div",Y,[1==o.loading?((0,n.wg)(),(0,n.iD)("section",J," Идет загрузка данных... ")):null==o.searchResult?((0,n.wg)(),(0,n.iD)("section",X," Для просмотра ничего не найдено ")):((0,n.wg)(),(0,n.iD)("section",H,[(0,n.Wm)(r,{filmsArray:o.searchResult.films},null,8,["filmsArray"])]))])])}const Q={class:"moviesList"},tt={class:"container p-6"},et={class:"columns is-multiline"};function it(t,e,i,a,o,s){const r=(0,n.up)("MovieCard");return(0,n.wg)(),(0,n.iD)("div",Q,[(0,n._)("div",tt,[(0,n._)("div",et,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.getFilms,(t=>((0,n.wg)(),(0,n.j4)(r,{key:t.filmId,film:t},null,8,["film"])))),128))])])])}const at={class:"card p-0"},nt={class:"card-image"},ot={class:"image is-4by5"},st=["src"],rt={class:"card-content"},lt={class:"media"},ct={class:"media-content"},ut={class:"title is-4"},mt={class:"subtitle is-6"},dt={key:0,class:"content description"};function ft(t,e,i,a,o,s){return(0,n.wg)(),(0,n.iD)("div",{class:"movieCard column is-3",onClick:e[0]||(e[0]=(...t)=>s.handleClick&&s.handleClick(...t))},[(0,n._)("div",at,[(0,n._)("div",nt,[(0,n._)("figure",ot,[(0,n._)("img",{src:i.film.posterUrlPreview,alt:""},null,8,st)])]),(0,n._)("div",rt,[(0,n._)("div",lt,[(0,n._)("div",ct,[(0,n._)("p",ut,(0,V.zw)(i.film.nameRu),1),(0,n._)("p",mt,(0,V.zw)(i.film.year),1)])]),void 0!==i.film.description?((0,n.wg)(),(0,n.iD)("div",dt,(0,V.zw)(i.film.description),1)):(0,n.kq)("",!0)])])])}var vt={name:"MovieCard",props:{film:null,isFavorite:Boolean(!1)},components:{},computed:{},methods:{handleClick:function(t){this.$router.push({name:"movie",query:{id:this.film.filmId}})}},mounted(){}};const ht=(0,A.Z)(vt,[["render",ft],["__scopeId","data-v-79bd52c1"]]);var pt=ht,gt={name:"MoviesList",props:{filmsArray:null,isFavorite:Boolean(!1)},components:{MovieCard:pt},computed:{getFilms(){return console.dir(this.filmsArray),this.filmsArray}},methods:{handleClick:function(t){console.dir(t)}},mounted(){}};const _t=(0,A.Z)(gt,[["render",it],["__scopeId","data-v-691e94ba"]]);var wt=_t,yt={name:"SearchView",data(){return{searchResult:null,loading:!1}},components:{MoviesList:wt},computed:{},methods:{async searchFilms(t){const e="6d4b871f-4668-46f6-873a-c61ffd2afb09";if(!this.loading&&(this.searchResult=null,void 0!==t)){this.loading=!0;try{const i="v2.1/films/search-by-keyword",a=`https://kinopoiskapiunofficial.tech/api/${i}`,n={headers:{"X-API-KEY":e},params:{keyword:t,page:"1"}},o=await N().get(a,n);this.searchResult=o.data}catch(i){i.response?console.log("Server Error:",i):i.request?console.log("Network Error:",i):console.log("Client Error:",i)}finally{this.loading=!1}}}},setup(){},mounted(){this.searchFilms(this.$route.query.q)},beforeRouteUpdate(t,e,i){i((i=>{i.$router.replace({name:e.name,params:e.params,query:t.query})})),this.searchFilms(t.query.q)}};const kt=(0,A.Z)(yt,[["render",G]]);var Dt=kt;const bt={id:"favoritesView"},Ft={class:"container p-3"},It={key:0},Et={key:1},At={key:2};function Rt(t,e,i,a,o,s){const r=(0,n.up)("MoviesList");return(0,n.wg)(),(0,n.iD)("div",bt,[(0,n._)("div",Ft,[null==s.films?((0,n.wg)(),(0,n.iD)("section",It," Идет загрузка данных... ")):0==s.films.length?((0,n.wg)(),(0,n.iD)("section",Et," Список избранного пуст ")):((0,n.wg)(),(0,n.iD)("section",At,[(0,n.Wm)(r,{filmsArray:s.films},null,8,["filmsArray"])]))])])}var Ot={name:"FavoritesView",components:{MoviesList:wt},computed:{films:function(){return this.$store.getters.getFavorites}},methods:{},mounted(){}};const Ct=(0,A.Z)(Ot,[["render",Rt]]);var qt=Ct;const St=t=>((0,n.dD)("data-v-4737d045"),t=t(),(0,n.Cn)(),t),Mt={id:"movieView"},Vt={class:"container p-6"},$t={key:0,class:"columns is-multiline"},Bt={class:"column is-4"},Tt={class:"image is-4by6"},Ut=["src"],Lt={class:"column is-8 is-justify-content-left"},xt={class:"columns"},zt={class:"column"},Nt={class:"nameRu"},Wt={class:"nameOriginal"},jt={class:"column is-half"},Pt={class:"table-container"},Zt=St((()=>(0,n._)("h3",{class:""},"О фильме",-1))),Kt={class:"table"},Yt={key:0},Jt=St((()=>(0,n._)("td",null,"Год производства",-1))),Xt={key:1},Ht=St((()=>(0,n._)("td",null,"Страна",-1))),Gt={key:2},Qt=St((()=>(0,n._)("td",null,"Жанр",-1))),te={key:3},ee=St((()=>(0,n._)("td",null,"Возраст",-1))),ie={key:4},ae=St((()=>(0,n._)("td",null,"Рейтинг MPAA",-1))),ne={key:5},oe=St((()=>(0,n._)("td",null,"Время",-1))),se={class:"description"},re=St((()=>(0,n._)("h3",null,"Обзор",-1))),le={key:1},ce={key:2};function ue(t,e,i,a,o,s){const r=(0,n.up)("FavoriteBtn");return(0,n.wg)(),(0,n.iD)("div",Mt,[(0,n._)("div",Vt,[null!==o.filmData?((0,n.wg)(),(0,n.iD)("section",$t,[(0,n._)("div",Bt,[(0,n._)("figure",Tt,[(0,n._)("img",{src:o.filmData.posterUrlPreview,alt:""},null,8,Ut)])]),(0,n._)("div",Lt,[(0,n._)("div",xt,[(0,n._)("div",zt,[(0,n._)("h2",Nt,(0,V.zw)(o.filmData.nameRu)+" ("+(0,V.zw)(o.filmData.year)+")",1),(0,n._)("div",Wt,(0,V.zw)(o.filmData.nameOriginal),1)]),(0,n._)("div",jt,[(0,n.Wm)(r,{filmData:o.filmData},null,8,["filmData"])])]),(0,n._)("div",Pt,[Zt,(0,n._)("table",Kt,[(0,n._)("tbody",null,[o.filmData.year?((0,n.wg)(),(0,n.iD)("tr",Yt,[Jt,(0,n._)("td",null,(0,V.zw)(o.filmData.year),1)])):(0,n.kq)("",!0),o.filmData.countries?((0,n.wg)(),(0,n.iD)("tr",Xt,[Ht,(0,n._)("td",null,(0,V.zw)(s.countries),1)])):(0,n.kq)("",!0),o.filmData.genres?((0,n.wg)(),(0,n.iD)("tr",Gt,[Qt,(0,n._)("td",null,(0,V.zw)(s.genres),1)])):(0,n.kq)("",!0),o.filmData.ratingAgeLimits?((0,n.wg)(),(0,n.iD)("tr",te,[ee,(0,n._)("td",null,(0,V.zw)(s.age)+"+",1)])):(0,n.kq)("",!0),o.filmData.ratingMpaa?((0,n.wg)(),(0,n.iD)("tr",ie,[ae,(0,n._)("td",null,(0,V.zw)(o.filmData.ratingMpaa.toUpperCase()),1)])):(0,n.kq)("",!0),o.filmData.filmLength?((0,n.wg)(),(0,n.iD)("tr",ne,[oe,(0,n._)("td",null,(0,V.zw)(o.filmData.filmLength)+" мин.",1)])):(0,n.kq)("",!0)])])]),(0,n._)("div",se,[re,(0,n.Uk)(" "+(0,V.zw)(o.filmData.description),1)])])])):o.loading?((0,n.wg)(),(0,n.iD)("section",le," Информация загружается... ")):((0,n.wg)(),(0,n.iD)("section",ce," Фильм не найден... "))])])}const me={id:"favoriteBtn"};function de(t,e,i,a,o,s){return(0,n.wg)(),(0,n.iD)("div",me,[s.isFavorite()?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"button is-danger",onClick:e[1]||(e[1]=(...t)=>s.removeFavorite&&s.removeFavorite(...t))},"Убрать из избранного")):((0,n.wg)(),(0,n.iD)("button",{key:0,class:"button is-primary",onClick:e[0]||(e[0]=(...t)=>s.addFavorite&&s.addFavorite(...t))},"Добавить в избранное"))])}var fe={name:"FavoriteBtn",props:{filmData:null},components:{},computed:{},methods:{isFavorite:function(){return-1!==this.$store.getters.getFavorites.findIndex((t=>t.filmId===this.filmData.filmId))},addFavorite:function(){this.$store.commit("ADD_FAVORITE",this.filmData)},removeFavorite:function(){this.$store.commit("REMOVE_FAVORITE",this.filmData)}},mounted(){},beforeRouteUpdate(t,e,i){}};const ve=(0,A.Z)(fe,[["render",de]]);var he=ve,pe={name:"MovieView",data(){return{filmData:null,loading:Boolean(!1)}},components:{FavoriteBtn:he},computed:{countries:function(){return this.filmData.countries.map((t=>t.country)).join(", ")},genres:function(){return this.filmData.genres.map((t=>t.genre)).join(", ")},age:function(){return this.filmData.ratingAgeLimits.replace("age","")}},methods:{addFavorite:function(){this.$store.commit("ADD_FAVORITE",this.filmData)},removeFavorite:function(){this.$store.commit("REMOVE_FAVORITE",this.filmData)},loadFilmData:async function(t){if(null!==this.filmData&&this.filmData.filmId===t)return;const e="6d4b871f-4668-46f6-873a-c61ffd2afb09";if(!this.loading&&(this.filmData=null,void 0!==t)){this.loading=!0;try{const i=`v2.2/films/${t}`,a=`https://kinopoiskapiunofficial.tech/api/${i}`,n={headers:{"X-API-KEY":e}},o=await N().get(a,n);o.data.filmId=o.data.kinopoiskId,this.filmData=o.data}catch(i){i.response?console.log("Server Error:",i):i.request?console.log("Network Error:",i):console.log("Client Error:",i)}finally{this.loading=!1}}}},mounted(){this.loadFilmData(this.$route.query.id)},beforeRouteUpdate(t,e,i){this.loadFilmData(t.query.id)}};const ge=(0,A.Z)(pe,[["render",ue],["__scopeId","data-v-4737d045"]]);var _e=ge;const we={id:"topView"},ye={class:"container p-3"},ke={key:0},De={key:1};function be(t,e,i,a,o,s){const r=(0,n.up)("MoviesList");return(0,n.wg)(),(0,n.iD)("div",we,[(0,n._)("div",ye,[null==o.topResult?((0,n.wg)(),(0,n.iD)("section",ke," Идет загрузка данных... ")):((0,n.wg)(),(0,n.iD)("section",De,[(0,n.Wm)(r,{filmsArray:o.topResult.films},null,8,["filmsArray"])]))])])}var Fe={name:"TopView",data(){return{topResult:null}},components:{MoviesList:wt},computed:{},methods:{async loadFilms(){const t="6d4b871f-4668-46f6-873a-c61ffd2afb09";this.searchResult=null;try{const e="v2.2/films/top",i=`https://kinopoiskapiunofficial.tech/api/${e}`,a={headers:{"X-API-KEY":t},params:{type:"TOP_250_BEST_FILMS",page:"1"}},n=await N().get(i,a);this.topResult=n.data}catch(e){e.response?console.log("Server Error:",e):e.request?console.log("Network Error:",e):console.log("Client Error:",e)}finally{this.loading=!1}}},setup(){},mounted(){this.loadFilms()}};const Ie=(0,A.Z)(Fe,[["render",be]]);var Ee=Ie;const Ae=(0,M.p7)({history:(0,M.r5)(),routes:[{path:"/",name:"home",component:Z},{path:"/search",name:"search",component:Dt},{path:"/favorites",name:"favorites",component:qt},{path:"/movie",name:"movie",component:_e},{path:"/top250",name:"top",component:Ee}]});var Re=Ae,Oe=i(65),Ce=(0,Oe.MT)({state:{favorites:null},getters:{getFavorites(t){if(null==t.favorites){if(t.favorites=[],localStorage.getItem("favorites"))try{t.favorites=JSON.parse(localStorage.getItem("favorites"))}catch(e){localStorage.removeItem("favorites")}localStorage.setItem("favorites",JSON.stringify(t.favorites))}return t.favorites}},mutations:{ADD_FAVORITE:function(t,e){e.filmId=e.kinopoiskId,t.favorites.push(e),localStorage.setItem("favorites",JSON.stringify(t.favorites))},REMOVE_FAVORITE:function(t,e){t.favorites.splice(t.favorites.indexOf(e),1),localStorage.setItem("favorites",JSON.stringify(t.favorites))}},actions:{}}),qe=i(8125),Se=i(7749),Me=i(8321);qe.vI.add({faUserSecret:Me.BC0,faSearch:Me.wn1}),(0,a.ri)(S).use(Ce).use(Re).component("font-awesome-icon",Se.GN).mount("#app")}},e={};function i(a){var n=e[a];if(void 0!==n)return n.exports;var o=e[a]={exports:{}};return t[a](o,o.exports,i),o.exports}i.m=t,function(){var t=[];i.O=function(e,a,n,o){if(!a){var s=1/0;for(u=0;u<t.length;u++){a=t[u][0],n=t[u][1],o=t[u][2];for(var r=!0,l=0;l<a.length;l++)(!1&o||s>=o)&&Object.keys(i.O).every((function(t){return i.O[t](a[l])}))?a.splice(l--,1):(r=!1,o<s&&(s=o));if(r){t.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[a,n,o]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,a){var n,o,s=a[0],r=a[1],l=a[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(n in r)i.o(r,n)&&(i.m[n]=r[n]);if(l)var u=l(i)}for(e&&e(a);c<s.length;c++)o=s[c],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(u)},a=self["webpackChunkfilms_local"]=self["webpackChunkfilms_local"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=i.O(void 0,[998],(function(){return i(5754)}));a=i.O(a)})();
//# sourceMappingURL=app.e15fb149.js.map