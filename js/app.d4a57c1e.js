(function(){"use strict";var t={6098:function(t,e,i){var a=i(9242),n=i(3396);const s={class:"wrapper"};function o(t,e,i,a,o,r){const l=(0,n.up)("NavBar"),c=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(l),(0,n.Wm)(c,{class:"hero is-fullheight"}),(0,n.Wm)(l)])}const r={class:"navbar p-0",role:"navigation","aria-label":"main navigation"},l={class:"navbar-brand"},c=(0,n._)("a",{class:"navbar-item",href:"https://bulma.io"},[(0,n._)("img",{src:"https://bulma.io/images/bulma-logo.png",width:"112",height:"28"})],-1),u=(0,n._)("span",{"aria-hidden":"true"},null,-1),m=(0,n._)("span",{"aria-hidden":"true"},null,-1),d=(0,n._)("span",{"aria-hidden":"true"},null,-1),f=[u,m,d],v={id:"navbarBlock",class:"navbar-menu"},h={class:"navbar-start"},p=(0,n.Uk)(" Главная "),g=(0,n.Uk)(" Избранное "),_=(0,n.Uk)(" Поиск "),w={class:"navbar-end"},y={class:"navbar-item"},D={class:"field has-addons"},k={class:"control is-expanded"},b={class:"control"};function F(t,e,i,s,o,u){const m=(0,n.up)("router-link"),d=(0,n.up)("font-awesome-icon");return(0,n.wg)(),(0,n.iD)("nav",r,[(0,n._)("div",l,[c,(0,n._)("a",{role:"button",class:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBlock",onClick:e[0]||(e[0]=(...t)=>u.toggleActive&&u.toggleActive(...t))},f)]),(0,n._)("div",v,[(0,n._)("div",h,[(0,n.Wm)(m,{to:{name:"home"},class:"navbar-item"},{default:(0,n.w5)((()=>[p])),_:1}),(0,n.Wm)(m,{to:{name:"favorites"},class:"navbar-item"},{default:(0,n.w5)((()=>[g])),_:1}),(0,n.Wm)(m,{to:{name:"search"},class:"navbar-item"},{default:(0,n.w5)((()=>[_])),_:1})]),(0,n._)("div",w,[(0,n._)("div",y,[(0,n._)("div",D,[(0,n._)("p",k,[(0,n.wy)((0,n._)("input",{class:"input",type:"search",placeholder:"Найти фильмец...","onUpdate:modelValue":e[1]||(e[1]=t=>o.searchTxt=t)},null,512),[[a.nr,o.searchTxt]])]),(0,n._)("div",b,[(0,n._)("button",{class:"button is-primary",onClick:e[2]||(e[2]=(...t)=>u.doSearch&&u.doSearch(...t))},[(0,n.Wm)(d,{icon:"fas fa-search"})])])])])])])])}var I={name:"NavBar",data(){return{searchTxt:null}},components:{},computed:{},methods:{toggleActive:function(t){const e=t.target.dataset.target,i=document.getElementById(e);t.target.classList.toggle("is-active"),i.classList.toggle("is-active")},doSearch:function(t){"search"===this.$router.currentRoute.value.name?this.$router.replace({name:"search",query:{q:this.searchTxt}}):this.$router.push({name:"search",query:{q:this.searchTxt}})}},mounted(){}},O=i(89);const A=(0,O.Z)(I,[["render",F]]);var C=A,E={components:{NavBar:C},strict:!0};const q=(0,O.Z)(E,[["render",o]]);var R=q,S=i(2483),$=i(7139);const M=t=>((0,n.dD)("data-v-58e75c94"),t=t(),(0,n.Cn)(),t),V={id:"homeView"},B={key:0,class:"container is-fluid p-0"},U={class:"title"},x=M((()=>(0,n._)("div",{class:"container is-fluid p-0 text-block"},[(0,n._)("section",{class:"hero is-info is-fullheight"},[(0,n._)("div",{class:"hero-body"},[(0,n._)("p",{class:""},[(0,n.Uk)(" Предназначение сервиса — помочь пользователю выбрать фильм для просмотра."),(0,n._)("br"),(0,n.Uk)(" Сервис поможет легко и быстро найти российские или зарубежные фильмы для взрослых и детей в интересующих жанрах. ")])])])],-1)));function z(t,e,i,a,s,o){return(0,n.wg)(),(0,n.iD)("div",V,[null!==s.film?((0,n.wg)(),(0,n.iD)("div",B,[(0,n._)("section",{class:"hero is-fullheight",style:(0,$.j5)({"background-image":`url(${s.film["posterUrl"]})`})},[(0,n._)("a",{class:"hero-body",onClick:e[0]||(e[0]=(...t)=>o.handleClickBanner&&o.handleClickBanner(...t))},[(0,n._)("p",U,(0,$.zw)(s.film["nameRu"]),1)])],4)])):(0,n.kq)("",!0),x])}var T=i(6265),L=i.n(T);const j="6d4b871f-4668-46f6-873a-c61ffd2afb09";var N={name:"HomeView",data(){return{film:null}},components:{},computed:{},methods:{async loadRandomFilm(){if(null===this.film)try{const t="v2.2/films/top",e=`https://kinopoiskapiunofficial.tech/api/${t}`,i={headers:{"X-API-KEY":j},params:{type:"",page:"1"}},a=await L().get(e,i);this.film=a.data.films[a.data.films.length*Math.random()|0]}catch(t){t.response?console.log("Server Error:",t):t.request?console.log("Network Error:",t):console.log("Client Error:",t)}},handleClickBanner(){this.$router.push({name:"movie",query:{id:this.film.filmId}})}},mounted(){this.loadRandomFilm()}};const W=(0,O.Z)(N,[["render",z],["__scopeId","data-v-58e75c94"]]);var Z=W;const P={id:"searchView"},J={class:"container p-3"},K={key:0},Y={key:1},X={key:2};function H(t,e,i,a,s,o){const r=(0,n.up)("MoviesList");return(0,n.wg)(),(0,n.iD)("div",P,[(0,n._)("div",J,[1==s.loading?((0,n.wg)(),(0,n.iD)("section",K," Идет загрузка данных... ")):null==s.searchResult?((0,n.wg)(),(0,n.iD)("section",Y," Для просмотра ничего не найдено ")):((0,n.wg)(),(0,n.iD)("section",X,[(0,n.Wm)(r,{filmsArray:s.searchResult.films},null,8,["filmsArray"])]))])])}const G={class:"moviesList"},Q={class:"container p-6"},tt={class:"columns is-multiline"};function et(t,e,i,a,s,o){const r=(0,n.up)("MovieCard");return(0,n.wg)(),(0,n.iD)("div",G,[(0,n._)("div",Q,[(0,n._)("div",tt,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.getFilms,(t=>((0,n.wg)(),(0,n.j4)(r,{key:t.filmId,film:t},null,8,["film"])))),128))])])])}const it={class:"card p-0"},at={class:"card-image"},nt={class:"image is-4by5"},st=["src"],ot={class:"card-content"},rt={class:"media"},lt={class:"media-content"},ct={class:"title is-4"},ut={class:"subtitle is-6"},mt={class:"content description"};function dt(t,e,i,a,s,o){return(0,n.wg)(),(0,n.iD)("div",{class:"movieCard column is-3",onClick:e[0]||(e[0]=(...t)=>o.handleClick&&o.handleClick(...t))},[(0,n._)("div",it,[(0,n._)("div",at,[(0,n._)("figure",nt,[(0,n._)("img",{src:i.film.posterUrlPreview,alt:""},null,8,st)])]),(0,n._)("div",ot,[(0,n._)("div",rt,[(0,n._)("div",lt,[(0,n._)("p",ct,(0,$.zw)(i.film.nameRu),1),(0,n._)("p",ut,(0,$.zw)(i.film.year),1)])]),(0,n._)("div",mt,(0,$.zw)(i.film.description),1)])])])}var ft={name:"MovieCard",props:{film:null,isFavorite:Boolean(!1)},components:{},computed:{},methods:{handleClick:function(t){this.$router.push({name:"movie",query:{id:this.film.filmId}})}},mounted(){}};const vt=(0,O.Z)(ft,[["render",dt],["__scopeId","data-v-65ab8672"]]);var ht=vt,pt={name:"MoviesList",props:{filmsArray:null,isFavorite:Boolean(!1)},components:{MovieCard:ht},computed:{getFilms(){return console.dir(this.filmsArray),this.filmsArray}},methods:{handleClick:function(t){console.dir(t)}},mounted(){}};const gt=(0,O.Z)(pt,[["render",et],["__scopeId","data-v-691e94ba"]]);var _t=gt,wt={name:"SearchView",data(){return{searchResult:null,loading:!1}},components:{MoviesList:_t},computed:{},methods:{async searchFilms(t){const e="6d4b871f-4668-46f6-873a-c61ffd2afb09";if(!this.loading&&(this.searchResult=null,void 0!==t)){this.loading=!0;try{const i="v2.1/films/search-by-keyword",a=`https://kinopoiskapiunofficial.tech/api/${i}`,n={headers:{"X-API-KEY":e},params:{keyword:t,page:"1"}},s=await L().get(a,n);this.searchResult=s.data}catch(i){i.response?console.log("Server Error:",i):i.request?console.log("Network Error:",i):console.log("Client Error:",i)}finally{this.loading=!1}}}},setup(){},mounted(){this.searchFilms(this.$route.query.q)},beforeRouteUpdate(t,e,i){i((i=>{i.$router.replace({name:e.name,params:e.params,query:t.query})})),this.searchFilms(t.query.q)}};const yt=(0,O.Z)(wt,[["render",H]]);var Dt=yt;const kt={id:"favoritesView"},bt={class:"container p-3"},Ft={key:0},It={key:1},Ot={key:2};function At(t,e,i,a,s,o){const r=(0,n.up)("MoviesList");return(0,n.wg)(),(0,n.iD)("div",kt,[(0,n._)("div",bt,[null==o.films?((0,n.wg)(),(0,n.iD)("section",Ft," Идет загрузка данных... ")):0==o.films.length?((0,n.wg)(),(0,n.iD)("section",It," Список избранного пуст ")):((0,n.wg)(),(0,n.iD)("section",Ot,[(0,n.Wm)(r,{filmsArray:o.films},null,8,["filmsArray"])]))])])}var Ct={name:"FavoritesView",components:{MoviesList:_t},computed:{films:function(){return this.$store.getters.getFavorites}},methods:{},mounted(){}};const Et=(0,O.Z)(Ct,[["render",At]]);var qt=Et;const Rt=t=>((0,n.dD)("data-v-4737d045"),t=t(),(0,n.Cn)(),t),St={id:"movieView"},$t={class:"container p-6"},Mt={key:0,class:"columns is-multiline"},Vt={class:"column is-4"},Bt={class:"image is-4by6"},Ut=["src"],xt={class:"column is-8 is-justify-content-left"},zt={class:"columns"},Tt={class:"column"},Lt={class:"nameRu"},jt={class:"nameOriginal"},Nt={class:"column is-half"},Wt={class:"table-container"},Zt=Rt((()=>(0,n._)("h3",{class:""},"О фильме",-1))),Pt={class:"table"},Jt={key:0},Kt=Rt((()=>(0,n._)("td",null,"Год производства",-1))),Yt={key:1},Xt=Rt((()=>(0,n._)("td",null,"Страна",-1))),Ht={key:2},Gt=Rt((()=>(0,n._)("td",null,"Жанр",-1))),Qt={key:3},te=Rt((()=>(0,n._)("td",null,"Возраст",-1))),ee={key:4},ie=Rt((()=>(0,n._)("td",null,"Рейтинг MPAA",-1))),ae={key:5},ne=Rt((()=>(0,n._)("td",null,"Время",-1))),se={class:"description"},oe=Rt((()=>(0,n._)("h3",null,"Обзор",-1))),re={key:1},le={key:2};function ce(t,e,i,a,s,o){const r=(0,n.up)("FavoriteBtn");return(0,n.wg)(),(0,n.iD)("div",St,[(0,n._)("div",$t,[null!==s.filmData?((0,n.wg)(),(0,n.iD)("section",Mt,[(0,n._)("div",Vt,[(0,n._)("figure",Bt,[(0,n._)("img",{src:s.filmData.posterUrlPreview,alt:""},null,8,Ut)])]),(0,n._)("div",xt,[(0,n._)("div",zt,[(0,n._)("div",Tt,[(0,n._)("h2",Lt,(0,$.zw)(s.filmData.nameRu)+" ("+(0,$.zw)(s.filmData.year)+")",1),(0,n._)("div",jt,(0,$.zw)(s.filmData.nameOriginal),1)]),(0,n._)("div",Nt,[(0,n.Wm)(r,{filmData:s.filmData},null,8,["filmData"])])]),(0,n._)("div",Wt,[Zt,(0,n._)("table",Pt,[(0,n._)("tbody",null,[s.filmData.year?((0,n.wg)(),(0,n.iD)("tr",Jt,[Kt,(0,n._)("td",null,(0,$.zw)(s.filmData.year),1)])):(0,n.kq)("",!0),s.filmData.countries?((0,n.wg)(),(0,n.iD)("tr",Yt,[Xt,(0,n._)("td",null,(0,$.zw)(o.countries),1)])):(0,n.kq)("",!0),s.filmData.genres?((0,n.wg)(),(0,n.iD)("tr",Ht,[Gt,(0,n._)("td",null,(0,$.zw)(o.genres),1)])):(0,n.kq)("",!0),s.filmData.ratingAgeLimits?((0,n.wg)(),(0,n.iD)("tr",Qt,[te,(0,n._)("td",null,(0,$.zw)(o.age)+"+",1)])):(0,n.kq)("",!0),s.filmData.ratingMpaa?((0,n.wg)(),(0,n.iD)("tr",ee,[ie,(0,n._)("td",null,(0,$.zw)(s.filmData.ratingMpaa.toUpperCase()),1)])):(0,n.kq)("",!0),s.filmData.filmLength?((0,n.wg)(),(0,n.iD)("tr",ae,[ne,(0,n._)("td",null,(0,$.zw)(s.filmData.filmLength)+" мин.",1)])):(0,n.kq)("",!0)])])]),(0,n._)("div",se,[oe,(0,n.Uk)(" "+(0,$.zw)(s.filmData.description),1)])])])):s.loading?((0,n.wg)(),(0,n.iD)("section",re," Информация загружается... ")):((0,n.wg)(),(0,n.iD)("section",le," Фильм не найден... "))])])}const ue={id:"favoriteBtn"};function me(t,e,i,a,s,o){return(0,n.wg)(),(0,n.iD)("div",ue,[o.isFavorite()?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"button is-danger",onClick:e[1]||(e[1]=(...t)=>o.removeFavorite&&o.removeFavorite(...t))},"Убрать из избранного")):((0,n.wg)(),(0,n.iD)("button",{key:0,class:"button is-primary",onClick:e[0]||(e[0]=(...t)=>o.addFavorite&&o.addFavorite(...t))},"Добавить в избранное"))])}var de={name:"FavoriteBtn",props:{filmData:null},components:{},computed:{},methods:{isFavorite:function(){return-1!==this.$store.getters.getFavorites.findIndex((t=>t.filmId===this.filmData.filmId))},addFavorite:function(){this.$store.commit("ADD_FAVORITE",this.filmData)},removeFavorite:function(){this.$store.commit("REMOVE_FAVORITE",this.filmData)}},mounted(){},beforeRouteUpdate(t,e,i){}};const fe=(0,O.Z)(de,[["render",me]]);var ve=fe,he={name:"MovieView",data(){return{filmData:null,loading:Boolean(!1)}},components:{FavoriteBtn:ve},computed:{countries:function(){return this.filmData.countries.map((t=>t.country)).join(", ")},genres:function(){return this.filmData.genres.map((t=>t.genre)).join(", ")},age:function(){return this.filmData.ratingAgeLimits.replace("age","")}},methods:{addFavorite:function(){this.$store.commit("ADD_FAVORITE",this.filmData)},removeFavorite:function(){this.$store.commit("REMOVE_FAVORITE",this.filmData)},loadFilmData:async function(t){if(null!==this.filmData&&this.filmData.filmId===t)return;const e="6d4b871f-4668-46f6-873a-c61ffd2afb09";if(!this.loading&&(this.filmData=null,void 0!==t)){this.loading=!0;try{const i=`v2.2/films/${t}`,a=`https://kinopoiskapiunofficial.tech/api/${i}`,n={headers:{"X-API-KEY":e}},s=await L().get(a,n);s.data.filmId=s.data.kinopoiskId,this.filmData=s.data}catch(i){i.response?console.log("Server Error:",i):i.request?console.log("Network Error:",i):console.log("Client Error:",i)}finally{this.loading=!1}}}},mounted(){this.loadFilmData(this.$route.query.id)},beforeRouteUpdate(t,e,i){this.loadFilmData(t.query.id)}};const pe=(0,O.Z)(he,[["render",ce],["__scopeId","data-v-4737d045"]]);var ge=pe;const _e=(0,S.p7)({history:(0,S.r5)(),routes:[{path:"/",name:"home",component:Z},{path:"/search",name:"search",component:Dt},{path:"/favorites",name:"favorites",component:qt},{path:"/movie",name:"movie",component:ge}]});var we=_e,ye=i(65),De=(0,ye.MT)({state:{favorites:null},getters:{getFavorites(t){if(null==t.favorites){if(t.favorites=[],localStorage.getItem("favorites"))try{t.favorites=JSON.parse(localStorage.getItem("favorites"))}catch(e){localStorage.removeItem("favorites")}localStorage.setItem("favorites",JSON.stringify(t.favorites))}return t.favorites}},mutations:{ADD_FAVORITE:function(t,e){e.filmId=e.kinopoiskId,t.favorites.push(e),localStorage.setItem("favorites",JSON.stringify(t.favorites))},REMOVE_FAVORITE:function(t,e){t.favorites.splice(t.favorites.indexOf(e),1),localStorage.setItem("favorites",JSON.stringify(t.favorites))}},actions:{}}),ke=i(8125),be=i(7749),Fe=i(8321);ke.vI.add({faUserSecret:Fe.BC0,faSearch:Fe.wn1}),(0,a.ri)(R).use(De).use(we).component("font-awesome-icon",be.GN).mount("#app")}},e={};function i(a){var n=e[a];if(void 0!==n)return n.exports;var s=e[a]={exports:{}};return t[a](s,s.exports,i),s.exports}i.m=t,function(){var t=[];i.O=function(e,a,n,s){if(!a){var o=1/0;for(u=0;u<t.length;u++){a=t[u][0],n=t[u][1],s=t[u][2];for(var r=!0,l=0;l<a.length;l++)(!1&s||o>=s)&&Object.keys(i.O).every((function(t){return i.O[t](a[l])}))?a.splice(l--,1):(r=!1,s<o&&(o=s));if(r){t.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[a,n,s]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,a){var n,s,o=a[0],r=a[1],l=a[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(n in r)i.o(r,n)&&(i.m[n]=r[n]);if(l)var u=l(i)}for(e&&e(a);c<o.length;c++)s=o[c],i.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return i.O(u)},a=self["webpackChunkfilms_local"]=self["webpackChunkfilms_local"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=i.O(void 0,[998],(function(){return i(6098)}));a=i.O(a)})();
//# sourceMappingURL=app.d4a57c1e.js.map