(function(){"use strict";var t={8744:function(t,e,i){var a=i(9242),n=i(3396);const s={class:"wrapper"};function o(t,e,i,a,o,r){const l=(0,n.up)("NavBar"),c=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(l),(0,n.Wm)(c,{class:"hero is-fullheight"})])}const r={class:"navbar p-0",role:"navigation","aria-label":"main navigation"},l={class:"navbar-brand"},c=(0,n._)("a",{class:"navbar-item",href:"https://bulma.io"},[(0,n._)("img",{src:"https://bulma.io/images/bulma-logo.png",width:"112",height:"28"})],-1),u=(0,n._)("span",{"aria-hidden":"true"},null,-1),m=(0,n._)("span",{"aria-hidden":"true"},null,-1),d=(0,n._)("span",{"aria-hidden":"true"},null,-1),f=[u,m,d],v={id:"navbarBlock",class:"navbar-menu"},p={class:"navbar-start"},h=(0,n.Uk)(" Главная "),g=(0,n.Uk)(" ТОП-250 "),_=(0,n.Uk)(" Избранное "),w=(0,n.Uk)(" Поиск "),y={class:"navbar-end"},k={class:"navbar-item"},D={class:"field has-addons"},b={class:"control is-expanded"},F={class:"control"};function I(t,e,i,s,o,u){const m=(0,n.up)("router-link"),d=(0,n.up)("font-awesome-icon");return(0,n.wg)(),(0,n.iD)("nav",r,[(0,n._)("div",l,[c,(0,n._)("a",{role:"button",class:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBlock",onClick:e[0]||(e[0]=(...t)=>u.toggleActive&&u.toggleActive(...t))},f)]),(0,n._)("div",v,[(0,n._)("div",p,[(0,n.Wm)(m,{to:{name:"home"},class:"navbar-item"},{default:(0,n.w5)((()=>[h])),_:1}),(0,n.Wm)(m,{to:{name:"top"},class:"navbar-item"},{default:(0,n.w5)((()=>[g])),_:1}),(0,n.Wm)(m,{to:{name:"favorites"},class:"navbar-item"},{default:(0,n.w5)((()=>[_])),_:1}),(0,n.Wm)(m,{to:{name:"search"},class:"navbar-item"},{default:(0,n.w5)((()=>[w])),_:1})]),(0,n._)("div",y,[(0,n._)("div",k,[(0,n._)("div",D,[(0,n._)("p",b,[(0,n.wy)((0,n._)("input",{class:"input",type:"search",placeholder:"Найти фильмец...","onUpdate:modelValue":e[1]||(e[1]=t=>o.searchTxt=t)},null,512),[[a.nr,o.searchTxt]])]),(0,n._)("div",F,[(0,n._)("button",{class:"button is-primary",onClick:e[2]||(e[2]=(...t)=>u.doSearch&&u.doSearch(...t))},[(0,n.Wm)(d,{icon:"fas fa-search"})])])])])])])])}var E={name:"NavBar",data(){return{searchTxt:null}},components:{},computed:{},methods:{toggleActive:function(t){const e=t.target.dataset.target,i=document.getElementById(e);t.target.classList.toggle("is-active"),i.classList.toggle("is-active")},doSearch:function(t){"search"===this.$router.currentRoute.value.name?this.$router.replace({name:"search",query:{q:this.searchTxt}}):this.$router.push({name:"search",query:{q:this.searchTxt}})}},mounted(){}},A=i(89);const R=(0,A.Z)(E,[["render",I]]);var O=R,C={components:{NavBar:O},strict:!0};const q=(0,A.Z)(C,[["render",o]]);var S=q,M=i(2483),V=i(7139);const $=t=>((0,n.dD)("data-v-3b6f6211"),t=t(),(0,n.Cn)(),t),B={id:"homeView"},U={key:0,class:"container is-fluid p-0"},T={class:"hero-body home"},L={class:"title"},z=$((()=>(0,n._)("p",{class:""},[(0,n.Uk)(" Предназначение сервиса — помочь пользователю выбрать фильм для просмотра."),(0,n._)("br"),(0,n.Uk)(" Сервис поможет легко и быстро найти российские или зарубежные фильмы для взрослых и детей в интересующих жанрах. ")],-1))),x={class:"poster"},N=["src"],P=["src"];function W(t,e,i,a,s,o){return(0,n.wg)(),(0,n.iD)("div",B,[null!==s.film?((0,n.wg)(),(0,n.iD)("div",U,[(0,n._)("section",{class:"hero is-fullheight",onClick:e[0]||(e[0]=(...t)=>o.handleClickBanner&&o.handleClickBanner(...t))},[(0,n._)("a",T,[(0,n._)("p",L,(0,V.zw)(s.film["nameRu"]),1),z]),(0,n._)("div",x,[(0,n._)("img",{src:s.film["posterUrl"],alt:"",class:"poster-shadow"},null,8,N),(0,n._)("img",{src:s.film["posterUrl"],alt:"",class:"poster-img"},null,8,P)])])])):(0,n.kq)("",!0)])}var j=i(6265),Z=i.n(j);const K="6d4b871f-4668-46f6-873a-c61ffd2afb09";var Y={name:"HomeView",data(){return{film:null}},components:{},computed:{},methods:{async loadRandomFilm(){if(null===this.film)try{const t="v2.2/films/top",e=`https://kinopoiskapiunofficial.tech/api/${t}`,i={headers:{"X-API-KEY":K},params:{type:"",page:"1"}},a=await Z().get(e,i);this.film=a.data.films[a.data.films.length*Math.random()|0],console.log(this.film)}catch(t){t.response?console.log("Server Error:",t):t.request?console.log("Network Error:",t):console.log("Client Error:",t)}},handleClickBanner(){this.$router.push({name:"movie",query:{id:this.film.filmId}})}},mounted(){this.loadRandomFilm()}};const J=(0,A.Z)(Y,[["render",W],["__scopeId","data-v-3b6f6211"]]);var X=J;const H={id:"searchView"},G={class:"container p-3"},Q={key:0},tt={key:1},et={key:2};function it(t,e,i,a,s,o){const r=(0,n.up)("MoviesList");return(0,n.wg)(),(0,n.iD)("div",H,[(0,n._)("div",G,[1==s.loading?((0,n.wg)(),(0,n.iD)("section",Q," Идет загрузка данных... ")):null==s.searchResult?((0,n.wg)(),(0,n.iD)("section",tt," Для просмотра ничего не найдено ")):((0,n.wg)(),(0,n.iD)("section",et,[(0,n.Wm)(r,{filmsArray:s.searchResult.films},null,8,["filmsArray"])]))])])}const at={class:"moviesList"},nt={class:"container p-6"},st={class:"columns is-multiline"};function ot(t,e,i,a,s,o){const r=(0,n.up)("MovieCard");return(0,n.wg)(),(0,n.iD)("div",at,[(0,n._)("div",nt,[(0,n._)("div",st,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.getFilms,(t=>((0,n.wg)(),(0,n.j4)(r,{key:t.filmId,film:t},null,8,["film"])))),128))])])])}const rt={class:"card p-0"},lt={class:"card-image"},ct={class:"image is-4by5"},ut=["src"],mt={class:"card-content"},dt={class:"media"},ft={class:"media-content"},vt={class:"title is-4"},pt={class:"subtitle is-6"},ht={key:0,class:"content description"};function gt(t,e,i,a,s,o){return(0,n.wg)(),(0,n.iD)("div",{class:"movieCard column is-3",onClick:e[0]||(e[0]=(...t)=>o.handleClick&&o.handleClick(...t))},[(0,n._)("div",rt,[(0,n._)("div",lt,[(0,n._)("figure",ct,[(0,n._)("img",{src:i.film.posterUrlPreview,alt:""},null,8,ut)])]),(0,n._)("div",mt,[(0,n._)("div",dt,[(0,n._)("div",ft,[(0,n._)("p",vt,(0,V.zw)(i.film.nameRu),1),(0,n._)("p",pt,(0,V.zw)(i.film.year),1)])]),void 0!==i.film.description?((0,n.wg)(),(0,n.iD)("div",ht,(0,V.zw)(i.film.description),1)):(0,n.kq)("",!0)])])])}var _t={name:"MovieCard",props:{film:null,isFavorite:Boolean(!1)},components:{},computed:{},methods:{handleClick:function(t){this.$router.push({name:"movie",query:{id:this.film.filmId}})}},mounted(){}};const wt=(0,A.Z)(_t,[["render",gt],["__scopeId","data-v-79bd52c1"]]);var yt=wt,kt={name:"MoviesList",props:{filmsArray:null,isFavorite:Boolean(!1)},components:{MovieCard:yt},computed:{getFilms(){return console.dir(this.filmsArray),this.filmsArray}},methods:{handleClick:function(t){console.dir(t)}},mounted(){}};const Dt=(0,A.Z)(kt,[["render",ot],["__scopeId","data-v-691e94ba"]]);var bt=Dt,Ft={name:"SearchView",data(){return{searchResult:null,loading:!1}},components:{MoviesList:bt},computed:{},methods:{async searchFilms(t){const e="6d4b871f-4668-46f6-873a-c61ffd2afb09";if(!this.loading&&(this.searchResult=null,void 0!==t)){this.loading=!0;try{const i="v2.1/films/search-by-keyword",a=`https://kinopoiskapiunofficial.tech/api/${i}`,n={headers:{"X-API-KEY":e},params:{keyword:t,page:"1"}},s=await Z().get(a,n);this.searchResult=s.data}catch(i){i.response?console.log("Server Error:",i):i.request?console.log("Network Error:",i):console.log("Client Error:",i)}finally{this.loading=!1}}}},setup(){},mounted(){this.searchFilms(this.$route.query.q)},beforeRouteUpdate(t,e,i){i((i=>{i.$router.replace({name:e.name,params:e.params,query:t.query})})),this.searchFilms(t.query.q)}};const It=(0,A.Z)(Ft,[["render",it]]);var Et=It;const At={id:"favoritesView"},Rt={class:"container p-3"},Ot={key:0},Ct={key:1},qt={key:2};function St(t,e,i,a,s,o){const r=(0,n.up)("MoviesList");return(0,n.wg)(),(0,n.iD)("div",At,[(0,n._)("div",Rt,[null==o.films?((0,n.wg)(),(0,n.iD)("section",Ot," Идет загрузка данных... ")):0==o.films.length?((0,n.wg)(),(0,n.iD)("section",Ct," Список избранного пуст ")):((0,n.wg)(),(0,n.iD)("section",qt,[(0,n.Wm)(r,{filmsArray:o.films},null,8,["filmsArray"])]))])])}var Mt={name:"FavoritesView",components:{MoviesList:bt},computed:{films:function(){return this.$store.getters.getFavorites}},methods:{},mounted(){}};const Vt=(0,A.Z)(Mt,[["render",St]]);var $t=Vt;const Bt=t=>((0,n.dD)("data-v-fe4f171a"),t=t(),(0,n.Cn)(),t),Ut={id:"movieView"},Tt={class:"container p-6"},Lt={key:0,class:"columns is-multiline"},zt={class:"column is-4"},xt={class:"image is-4by6"},Nt=["src"],Pt=["src"],Wt={class:"column is-8 is-justify-content-left"},jt={class:"columns"},Zt={class:"column"},Kt={class:"nameRu"},Yt={class:"nameOriginal"},Jt={class:"column is-half"},Xt={class:"table-container"},Ht=Bt((()=>(0,n._)("h3",{class:""},"О фильме",-1))),Gt={class:"table"},Qt={key:0},te=Bt((()=>(0,n._)("td",null,"Год производства",-1))),ee={key:1},ie=Bt((()=>(0,n._)("td",null,"Страна",-1))),ae={key:2},ne=Bt((()=>(0,n._)("td",null,"Жанр",-1))),se={key:3},oe=Bt((()=>(0,n._)("td",null,"Возраст",-1))),re={key:4},le=Bt((()=>(0,n._)("td",null,"Рейтинг MPAA",-1))),ce={key:5},ue=Bt((()=>(0,n._)("td",null,"Время",-1))),me={class:"description"},de=Bt((()=>(0,n._)("h3",null,"Обзор",-1))),fe={key:1},ve={key:2};function pe(t,e,i,a,s,o){const r=(0,n.up)("FavoriteBtn");return(0,n.wg)(),(0,n.iD)("div",Ut,[(0,n._)("div",Tt,[null!==s.filmData?((0,n.wg)(),(0,n.iD)("section",Lt,[(0,n._)("div",zt,[(0,n._)("figure",xt,[(0,n._)("img",{src:s.filmData.posterUrlPreview,alt:"",class:"poster-shadow"},null,8,Nt),(0,n._)("img",{src:s.filmData.posterUrlPreview,alt:"",class:"poster-img"},null,8,Pt)])]),(0,n._)("div",Wt,[(0,n._)("div",jt,[(0,n._)("div",Zt,[(0,n._)("h2",Kt,(0,V.zw)(s.filmData.nameRu)+" ("+(0,V.zw)(s.filmData.year)+")",1),(0,n._)("div",Yt,(0,V.zw)(s.filmData.nameOriginal),1)]),(0,n._)("div",Jt,[(0,n.Wm)(r,{filmData:s.filmData},null,8,["filmData"])])]),(0,n._)("div",Xt,[Ht,(0,n._)("table",Gt,[(0,n._)("tbody",null,[s.filmData.year?((0,n.wg)(),(0,n.iD)("tr",Qt,[te,(0,n._)("td",null,(0,V.zw)(s.filmData.year),1)])):(0,n.kq)("",!0),s.filmData.countries?((0,n.wg)(),(0,n.iD)("tr",ee,[ie,(0,n._)("td",null,(0,V.zw)(o.countries),1)])):(0,n.kq)("",!0),s.filmData.genres?((0,n.wg)(),(0,n.iD)("tr",ae,[ne,(0,n._)("td",null,(0,V.zw)(o.genres),1)])):(0,n.kq)("",!0),s.filmData.ratingAgeLimits?((0,n.wg)(),(0,n.iD)("tr",se,[oe,(0,n._)("td",null,(0,V.zw)(o.age)+"+",1)])):(0,n.kq)("",!0),s.filmData.ratingMpaa?((0,n.wg)(),(0,n.iD)("tr",re,[le,(0,n._)("td",null,(0,V.zw)(s.filmData.ratingMpaa.toUpperCase()),1)])):(0,n.kq)("",!0),s.filmData.filmLength?((0,n.wg)(),(0,n.iD)("tr",ce,[ue,(0,n._)("td",null,(0,V.zw)(s.filmData.filmLength)+" мин.",1)])):(0,n.kq)("",!0)])])]),(0,n._)("div",me,[de,(0,n.Uk)(" "+(0,V.zw)(s.filmData.description),1)])])])):s.loading?((0,n.wg)(),(0,n.iD)("section",fe," Информация загружается... ")):((0,n.wg)(),(0,n.iD)("section",ve," Фильм не найден... "))])])}const he={id:"favoriteBtn"};function ge(t,e,i,a,s,o){return(0,n.wg)(),(0,n.iD)("div",he,[o.isFavorite()?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"button is-danger",onClick:e[1]||(e[1]=(...t)=>o.removeFavorite&&o.removeFavorite(...t))},"Убрать из избранного")):((0,n.wg)(),(0,n.iD)("button",{key:0,class:"button is-primary",onClick:e[0]||(e[0]=(...t)=>o.addFavorite&&o.addFavorite(...t))},"Добавить в избранное"))])}var _e={name:"FavoriteBtn",props:{filmData:null},components:{},computed:{},methods:{isFavorite:function(){return-1!==this.$store.getters.getFavorites.findIndex((t=>t.filmId===this.filmData.filmId))},addFavorite:function(){this.$store.commit("ADD_FAVORITE",this.filmData)},removeFavorite:function(){this.$store.commit("REMOVE_FAVORITE",this.filmData)}},mounted(){},beforeRouteUpdate(t,e,i){}};const we=(0,A.Z)(_e,[["render",ge]]);var ye=we,ke={name:"MovieView",data(){return{filmData:null,loading:Boolean(!1)}},components:{FavoriteBtn:ye},computed:{countries:function(){return this.filmData.countries.map((t=>t.country)).join(", ")},genres:function(){return this.filmData.genres.map((t=>t.genre)).join(", ")},age:function(){return this.filmData.ratingAgeLimits.replace("age","")}},methods:{addFavorite:function(){this.$store.commit("ADD_FAVORITE",this.filmData)},removeFavorite:function(){this.$store.commit("REMOVE_FAVORITE",this.filmData)},loadFilmData:async function(t){if(null!==this.filmData&&this.filmData.filmId===t)return;const e="6d4b871f-4668-46f6-873a-c61ffd2afb09";if(!this.loading&&(this.filmData=null,void 0!==t)){this.loading=!0;try{const i=`v2.2/films/${t}`,a=`https://kinopoiskapiunofficial.tech/api/${i}`,n={headers:{"X-API-KEY":e}},s=await Z().get(a,n);s.data.filmId=s.data.kinopoiskId,this.filmData=s.data}catch(i){i.response?console.log("Server Error:",i):i.request?console.log("Network Error:",i):console.log("Client Error:",i)}finally{this.loading=!1}}}},mounted(){this.loadFilmData(this.$route.query.id)},beforeRouteUpdate(t,e,i){this.loadFilmData(t.query.id)}};const De=(0,A.Z)(ke,[["render",pe],["__scopeId","data-v-fe4f171a"]]);var be=De;const Fe={id:"topView"},Ie={class:"container p-3"},Ee={key:0},Ae={key:1};function Re(t,e,i,a,s,o){const r=(0,n.up)("MoviesList");return(0,n.wg)(),(0,n.iD)("div",Fe,[(0,n._)("div",Ie,[null==s.topResult?((0,n.wg)(),(0,n.iD)("section",Ee," Идет загрузка данных... ")):((0,n.wg)(),(0,n.iD)("section",Ae,[(0,n.Wm)(r,{filmsArray:s.topResult.films},null,8,["filmsArray"])]))])])}var Oe={name:"TopView",data(){return{topResult:null}},components:{MoviesList:bt},computed:{},methods:{async loadFilms(){const t="6d4b871f-4668-46f6-873a-c61ffd2afb09";this.searchResult=null;try{const e="v2.2/films/top",i=`https://kinopoiskapiunofficial.tech/api/${e}`,a={headers:{"X-API-KEY":t},params:{type:"TOP_250_BEST_FILMS",page:"1"}},n=await Z().get(i,a);this.topResult=n.data}catch(e){e.response?console.log("Server Error:",e):e.request?console.log("Network Error:",e):console.log("Client Error:",e)}finally{this.loading=!1}}},setup(){},mounted(){this.loadFilms()}};const Ce=(0,A.Z)(Oe,[["render",Re]]);var qe=Ce;const Se=(0,M.p7)({history:(0,M.r5)(),routes:[{path:"/",name:"home",component:X},{path:"/search",name:"search",component:Et},{path:"/favorites",name:"favorites",component:$t},{path:"/movie",name:"movie",component:be},{path:"/top250",name:"top",component:qe}]});var Me=Se,Ve=i(65),$e=(0,Ve.MT)({state:{favorites:null},getters:{getFavorites(t){if(null==t.favorites){if(t.favorites=[],localStorage.getItem("favorites"))try{t.favorites=JSON.parse(localStorage.getItem("favorites"))}catch(e){localStorage.removeItem("favorites")}localStorage.setItem("favorites",JSON.stringify(t.favorites))}return t.favorites}},mutations:{ADD_FAVORITE:function(t,e){e.filmId=e.kinopoiskId,t.favorites.push(e),localStorage.setItem("favorites",JSON.stringify(t.favorites))},REMOVE_FAVORITE:function(t,e){t.favorites.splice(t.favorites.indexOf(e),1),localStorage.setItem("favorites",JSON.stringify(t.favorites))}},actions:{}}),Be=i(8125),Ue=i(7749),Te=i(8321);Be.vI.add({faUserSecret:Te.BC0,faSearch:Te.wn1}),(0,a.ri)(S).use($e).use(Me).component("font-awesome-icon",Ue.GN).mount("#app")}},e={};function i(a){var n=e[a];if(void 0!==n)return n.exports;var s=e[a]={exports:{}};return t[a](s,s.exports,i),s.exports}i.m=t,function(){var t=[];i.O=function(e,a,n,s){if(!a){var o=1/0;for(u=0;u<t.length;u++){a=t[u][0],n=t[u][1],s=t[u][2];for(var r=!0,l=0;l<a.length;l++)(!1&s||o>=s)&&Object.keys(i.O).every((function(t){return i.O[t](a[l])}))?a.splice(l--,1):(r=!1,s<o&&(o=s));if(r){t.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[a,n,s]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,a){var n,s,o=a[0],r=a[1],l=a[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(n in r)i.o(r,n)&&(i.m[n]=r[n]);if(l)var u=l(i)}for(e&&e(a);c<o.length;c++)s=o[c],i.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return i.O(u)},a=self["webpackChunkfilms_local"]=self["webpackChunkfilms_local"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=i.O(void 0,[998],(function(){return i(8744)}));a=i.O(a)})();
//# sourceMappingURL=app.823d9c39.js.map